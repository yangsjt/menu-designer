# 动径 MovePath — 产品需求文档 (PRD)

## 产品概述

**产品名称：** 动径 MovePath 菜单设计系统

**产品定位：** 动径 MovePath 是"梧桐区街区探索站"，融合咖啡与骑行文化的城市空间。菜单设计系统包含墙面菜单板、A4 立牌菜单和 Gallery 索引页，向顾客传达完整的产品线和品牌调性。

**核心诉求：**
- 一目了然展示全部饮品与租赁服务
- 传递骑行 × 咖啡的品牌特色
- 支持多格式直接印刷输出
- 季节主题切换，适配不同季节活动

---

## 菜单格式

### 格式 1：墙面菜单 (wall-menu.html)

| 属性 | 值 |
|------|------|
| 画布尺寸 | 1250 × 600 px |
| 印刷尺寸 | 125 cm × 60 cm |
| 像素密度 | 1 mm = 1 px |
| 预览缩放 | `scale(0.75)` |
| 布局 | 三栏横排 |

#### 三栏布局

```
┌─ Header (66px) ───────────────────────────────────────────┐
│  Logo + 品牌标语                                           │
├──────────┬──────────────────┬─────────────────────────────┤
│ Col 1    │ Col 2            │ Col 3                       │
│ 290px    │ 430px            │ flex:1 (≈530px)             │
│          │                  │                             │
│ 季节限定  │ 动径特调 (Grid)   │ 经典日常 (列表)    │ 自行车   │
│ (图片卡片)│ 能量组合 (横卡)   │ 非咖啡类 (列表)    │ 租赁     │
├──────────┴──────────────────┴─────────────────────────────┤
│  Footer (26px) — 优惠信息 + 货币说明                        │
└──────────────────────────────────────────────────────────┘
```

### 格式 2：A4 立牌菜单 (a4-menu.html)

| 属性 | 值 |
|------|------|
| 画布尺寸 | 210 × 297 px |
| 印刷尺寸 | 21 cm × 29.7 cm (A4) |
| 像素密度 | 1 mm = 1 px |
| 预览缩放 | `scale(3.5)` |
| 阅读距离 | 30–50 cm（桌面立牌） |
| 布局 | 竖向堆叠 |

#### 竖向布局

```
┌──────────────────────────────────┐
│  HEADER (14mm)                   │
├──────────────────────────────────┤
│  季节限定（横排 3 小图卡）         │
├──────────────────────────────────┤
│  动径特调（2×4 紧凑网格）         │
├──────────────────────────────────┤
│  能量组合（横排 3 卡）            │
├───────────────┬──────────────────┤
│ 经典日常       │ 非咖啡类          │
├───────────────┴──────────────────┤
│  自行车租赁（全宽，左图右文）      │
├──────────────────────────────────┤
│  FOOTER (7mm)                    │
└──────────────────────────────────┘
```

### Gallery 索引页 (index.html)

- 通过 iframe 嵌入两个菜单的缩放实时预览
- 主题切换器：圆形色块行，点击即切换全部菜单主题
- 布局切换器：每个菜单卡片独立的 Layout A/B 切换按钮
- 操作入口：查看原尺寸、导出 PDF（弹窗引导 CLI 命令）
- 深色主题（与品牌一致）
- 需通过 HTTP 服务预览

---

## 季节主题系统

### 设计原则

- **品牌橙 `--orange` 永不变**：Header/Footer 边框、标语颜色是品牌身份
- **`--accent` 随季节变化**：季节卡片、特调价格、组合 badge、.accent 背景

### 5 套主题

| 主题 | `data-theme` | `--accent` | 设计意图 |
|------|-------------|-----------|---------|
| 默认 | `default` | `#f05f22` 品牌橙 | 无季节活动时 |
| 春节 | `cny` | `#d4382a` 中国红 | 配合年味菜品 |
| 春天 | `spring` | `#e85d9a` 多巴胺粉 | 水果季饮品 |
| 夏天 | `summer` | `#2dbbab` 薄荷青 | 冰饮/气泡季 |
| 秋天 | `autumn` | `#c87e3a` 焦糖琥珀 | 肉桂/焦糖/坚果季 |

### 持久化

通过 localStorage 存储当前主题，刷新/重开后自动恢复。Gallery 页通过 postMessage 同步主题到 iframe。

---

## 布局变体系统

### 设计原则

- 主题全局共享（`data-theme`）、布局各菜单独立（`data-layout`）
- 纯 CSS 实现，不改变菜单 HTML 结构
- CSS 选择器前缀 `[data-layout="b"]`

### 墙面菜单 Layout B — "特调优先"

| 属性 | Layout A（默认） | Layout B |
|------|-----------------|----------|
| 列顺序 | 季节限定 → 特调 → 经典 | 特调 → 季节限定 → 经典 |
| 特调网格 | 2 列 (430px) | 3 列 (480px) |
| 季节限定列宽 | 290px | 250px |
| 组合卡方向 | 纵向堆叠 | 横向并排 |

**使用场景：** 特调品类丰富时，突出特调区域的视觉权重。

### A4 菜单 Layout B — "双栏紧凑"

| 属性 | Layout A（默认） | Layout B |
|------|-----------------|----------|
| 主体布局 | flex 纵向堆叠 | CSS Grid 双栏 (115px + 95px) |
| 季节限定卡 | 横向 3 卡 | 纵向 3 卡 |
| 特调+组合 | 独立区块 | 与季节限定同列（左栏） |
| 经典+非咖啡+租赁 | 横排双列 | 右栏纵向堆叠 |

**使用场景：** 品类较多需要紧凑排版时，利用双栏提高信息密度。

### 持久化

| localStorage Key | 用途 | 默认值 |
|-----------------|------|--------|
| `wall-layout` | 墙面菜单布局 | `a` |
| `a4-layout` | A4 菜单布局 | `a` |

Gallery 通过 postMessage 同步布局选择到对应 iframe。

---

## PDF 导出

### 工具

基于 Puppeteer 的自动化 PDF 导出工具，在本地启动 HTTP 服务 → 加载菜单页面 → 应用主题/布局 → 导出精确尺寸 PDF。

### 输出规格

| 菜单 | PDF 尺寸 | 方向 | 文件名格式 |
|------|---------|------|-----------|
| 墙面菜单 | 1250mm x 600mm | 横版 | `wall-menu-{theme}-{layout}.pdf` |
| A4 立牌 | 210mm x 297mm | 竖版 | `a4-menu-{theme}-{layout}.pdf` |

### CLI 用法

```bash
npm install                                        # 首次安装 Puppeteer
npm run pdf                                        # 导出全部（默认主题+布局）
npm run pdf:wall                                   # 仅墙面菜单
npm run pdf:a4                                     # 仅 A4 立牌
node scripts/generate-pdf.js wall --theme cny      # 指定主题
node scripts/generate-pdf.js a4 --layout b         # 指定布局
```

PDF 输出到 `output/` 目录。

---

## 各区域功能说明

### A. Header

- 品牌 Logo（SVG 白色版）
- 品牌标语：`咖啡与骑行的城市探索站`
- 英文副标语：`URBAN EXPLORATION HUB OF COFFEE & CYCLING`
- 墙面版高度 66px，A4 版高度 14px

### B. 季节限定

- 橙色标题栏（使用 `--accent` 色）
- 3 张全出血图片卡片
- 每张卡片：产品图 + 底部渐变蒙版 + 品名/英文名/描述/价格
- 高价商品（>45）添加 accent 色轮廓线（`.premium`）
- 墙面版：纵向排列；A4 版：横向 3 卡

### C. 动径特调 + 能量组合

**动径特调：**
- 2×4 网格布局，7 款特调 + 1 格 Logo 水印
- 高价商品（≥38 且非手冲）添加 accent 渐变背景（`.accent`）

**能量组合：**
- 3 张迷你卡，左侧 accent 色边框
- "加"类型：深色背景，badge 显示"加N"
- 固定价格类型：accent 色背景（`.highlight`），badge 显示数字
- 墙面版：纵向排列；A4 版：横向 3 卡

### D. 经典日常 + 非咖啡

- 点线价目表格式：品名 ··· 价格
- 经典日常：7 款基础咖啡 + 2 个升级项
- 非咖啡类：6 款非咖啡饮品
- 墙面版：共享一个子列；A4 版：双列并排

### E. 自行车租赁

- 产品图 + 价格信息
- 主价格突出显示（¥25 / 1H）
- 三档时长价格（1H / 4H / 24H）
- 租赁流程说明
- 墙面版：右子列图+叠加文字；A4 版：全宽横条左图右文

### F. Footer

- 五项信息：骑行到店减3、自带杯减3、宠物友好、店长推荐、续杯半价
- 竖线分隔，配 emoji 图标
- 右侧货币单位说明
- 墙面版高度 26px，A4 版高度 7px

---

## 数据源与更新流程

### 数据源文件

`docs/动径咖啡店铺菜单 - 当前菜单.csv`

这是菜单的**唯一数据源**。所有菜品信息的变更应先更新 CSV，再同步到 HTML。

### 更新流程

#### 推荐：使用 `/更新菜单` 命令

在 Claude Code 中执行 `/更新菜单`，自动完成全流程：

1. 读取 CSV + 验证格式（列名严格匹配）
2. 解析数据，按类别分组
3. 对比 CSV 与 HTML 当前内容的差异
4. **展示变更报告，等待用户确认**
5. 确认后同时更新 `wall-menu.html` 和 `a4-menu.html`
6. 验证结果 + 提醒手动检查事项

#### 手动流程

1. 编辑 CSV 文件（修改价格、品名、描述等）
2. 参照 `CLAUDE.md` 中的 CSV → HTML 映射表
3. **同时更新** `wall-menu.html` 和 `a4-menu.html` 中对应元素
4. 浏览器预览验证显示效果

#### 数据一致性原则

- CSV 是唯一真实数据源，HTML 内容必须与 CSV 保持一致
- 每次变更必须同时更新两个 HTML 文件
- 变更前后应通过 Gallery 预览确认效果

### CSV 字段说明

| 列 | 字段名 | 类型 | 说明 |
|----|--------|------|------|
| B | 序号 | 数字 | 1–33 顺序编号 |
| C | 类别 | 文本 | 6 个类别 |
| D | 品名 | 文本 | 中文产品名称 |
| E | 英文名/包含内容 | 文本 | 英文名或套餐内容 |
| F | 描述/规格 | 文本 | 产品描述或规格说明 |
| G | 规格 | 文本 | Ice/Hot 标注（仅参考） |
| H | 价格 (¥) | 数字/文本 | 纯数字或 `加 N` 格式 |
| I | 店长推荐 | 文本 | `是` 或空白 |

---

## 设计约束

### 色彩系统

参照 `README.md` 色彩系统章节。核心区分：
- `--orange` 品牌色：永不被主题覆盖
- `--accent` 主题色：随季节切换

### 字体

| 字体 | 用途 |
|------|------|
| Noto Sans SC | 中文正文（300/400/500/700） |
| Bebas Neue | 英文标题、价格、标签 |

### 价格显示

- 全部使用纯数字，不添加任何货币符号（"元"、"¥"）
- 升级项价格加 `+` 前缀
- 组合套餐"加"类型显示 `加N`
- 租赁价格带 ¥ 前缀 + 时间单位
- 货币说明统一在 Footer 标注：`货币单位为人民币 (RMB)`

---

## 技术约束

- 菜单本身零构建、零依赖、纯静态 HTML/CSS/JS
- CSS 拆分为共享 base + 格式专属（`@page` 规则互斥）
- 主题切换通过 CSS 变量 + `data-theme` 属性
- 布局变体通过 CSS 变量 + `data-layout` 属性，纯 CSS 实现
- Gallery iframe 预览需 HTTP 服务
- 两种菜单格式共享 `base.css` 和 `themes.css`
- PDF 导出依赖 Puppeteer（`package.json` 中唯一 npm 依赖）
- PDF 输出到 `output/` 目录（已 gitignore）
